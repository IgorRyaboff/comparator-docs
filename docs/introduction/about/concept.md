# Логика работы Сравнителя
---
## Сравнение произвольных таблиц, а не объектов метаданных
Сравнитель не привязан к сравнению объектов метаданных (то есть, например, к сравнению реквизитов документов одного и того же типа) - программа сравнивает данные в **таблицах произвольной структуры**, которую объявляет разработчик решения на базе Сравнителя.

Отсутствие привязки Сравнителя к структуре метаданных какой-либо конфигурации позволяет реализовывать кейсы сравнения данных любой сложности - от сравнения реквизитов нормативно-справочной информации до сравнения остатков и оборотов, формируемых сложными запросами.

## Правила сравнения
Для описания логики сравнения конкретной пары информационных баз применяются **правила сравнения**. Правила сравнения описывают **таблицы**, в которые будут выгружаться данные, а также хранят в себе несколько **подключаемых обработок**, обеспечивающих необходимую произвольную программную логику решения.

### Таблицы правил сравнения
Каждая таблица правила сравнения позволяет передавать для сравнения данные определенного характера. В примере этой статьи будет таблица "**Остатки товаров**".

Каждая таблица имеет **поля**, отражающие колонки таблиц, выгружаемых из целевых информационных баз.

Каждое поле может быть либо **измерением**, либо **ресурсом**. Измерения предназначены для однозначной идентификации строк таблицы, а ресурсы содержат значения, которые нужно сравнивать.

Рассматривая пример с остатками товаров, можно задать таблицу, в которой будут **измерения** "*Номенклатура*" и "*Характеристика*", а также ресурс "*Остаток*", содержащий количество товара на остатках.

## Выгрузка данных
Первый этап итерации сравнения данных - это выгрузка данных из двух целевых информационных баз и передача этих выгрузок в Сравнитель. Выгрузки хранят таблицы правил сравнения, наполненные данными из целевых баз.

## Сравнение данных
Когда две выгрузки поступили в Сравнитель, данные в них можно сравнить.

Сравнитель берет каждую пару таблиц, соотносит строки первой и второй выгрузок по измерениям и сравнивает значения ресурсов. Найденные расхождения записываются в базу Сравнителя для дальнейшего просмотра пользователем.